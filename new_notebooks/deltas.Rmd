---
title: "Deltas in cases/NY"
author: "Jose Figueroa"
date: 05/14/2020
output: html_notebook
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r echo = F, results = 'hide',  warning=FALSE, message=FALSE}
#### Library and Data Imports ####
library(here)

## Load essential R packages
source(here("modules","Source.R"))

## Load stored data (see `data` subdirectory)
source(here("modules","data_load.R"))

## Create dataframes; perform desparity index calcuations; prep for plotting
source(here("modules","preprocessing.R"))
```

Dataset will be primarily covid_NY_TS_plot.cases

```{r}
covid_NY_TS_plot.cases %>% glimpse()
```

```{r}
covid_NY_TS_plot.cases %>% summary()
```

```{r}

    NY_region_palette.df <- NY_counties_regions %>%
      dplyr::select(Region,Color) %>% 
      dplyr::distinct(Region,Color)
    
    NY_region_palette <- setNames(as.character(NY_region_palette.df$Color), as.character(NY_region_palette.df$Region))

    
covid_NY_TS_plot.cases %>%
  filter(!County %in% c("New York",
                        "New York State")) %>%
  ggplot(
    aes(
      x = date,
      y = diff,
      color = Region,
      group = County
    )
  ) +
  scale_color_manual(values=NY_region_palette) +
  geom_line(size = 1) + 
        scale_y_continuous(
        breaks = c(5,10,100,1000,2500,5000,7500,10000)
      ) +
      scale_x_datetime(date_breaks = "1 week", date_minor_breaks = "1 day", date_labels = "%b %d") +
    NULL
```

```{r}
covid_NY_TS_plot.cases %>%
  ggplot(
    aes(
      x = date,
      y = p_diff,
      color = Region,
      group = County
    )
  ) +
  geom_line(size = 1) +       scale_y_continuous(
        breaks = c(10,50,100,150,200,250, 300, 500)
      ) +
      scale_x_datetime(date_breaks = "1 week", date_minor_breaks = "1 day", date_labels = "%b %d") +
    NULL
```

Interesting discrepencies...
