---
title: "COVIDMINDER Bootcamp Notebook"
author: "Alex Chan"
date: "4/28/2020"
output:
  pdf_document:
    toc: yes
    toc_depth: '2'
  html_document:
    number_sections: yes
    toc: yes
    toc_depth: 2
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r echo = F, results = 'hide',  warning=FALSE, message=FALSE}
#### Library and Data Imports ####

## Load essential R packages
source("modules/Source.R")

## Load stored data (see `data` subdirectory)
source("modules/data_load.R")

## Create dataframes; perform desparity index calcuations; prep for plotting
source("modules/preprocessing.R")

```

##github help (DELETE!)

* DO THIS FIRST:
    + `git clone https://github.com/TheRensselaerIDEA/COVID-Notebooks` (if you haven't already)
        + NOTE: We may have added to the master since your last `git pull` so make sure to do a `git pull origin master`
    + `git checkout -b <your-new-branch>` (more instructions immediately below)
    + In R, create a new R notebook (ie a `.Rmd` file) in the subdirectory `MATP-4400-FINAL`
    + `git add` it to the repo (make sure you're in the correct directory when you do this!)
    + `git commit -a -m 'Created my notebook!'` as soon as you do this! 
    + `git push origin <your-new-branch>` so we see you're working on something
    + Post a link in LMS; it will remain valid as you update (and check in) your work to github
    + for details, see instructions in next few bullets
    + Contact John Erickson erickj4@rpi.edu for further github questions
* See: **HOW TO USE THIS NOTEBOOK AND REPOSITORY** https://bit.ly/2wYQGXP
* See also: **git Cheat Sheet** https://bit.ly/2yCBSi8 

*DELETE THE SECTIONS ABOVE!*
<hr>

# Final Project: Submission Links

*This should be the first section of your final project notebook. Fill out the following according to how you submitted your notebook!*

* github repository: https://github.com/TheRensselaerIDEA/COVID-Notebooks (for reference)
* My github ID: *alexchan18*
* github issues addressed by this work: `#27`
* Github branch name of my submitted notebook: *feature-27*
* link to merged notebook (post these to LMS!: 
    + https://github.com/TheRensselaerIDEA/COVID-Notebooks/blob/feature-27/MATP-4400-FINAL/covid-notebook-Chana6.Rmd 
    + https://github.com/TheRensselaerIDEA/COVID-Notebooks/blob/feature-27/MATP-4400-FINAL/covid-notebook-Chana6.pdf 

# Overview & Problems Tackled

*On March 11, 2020, the World Health Organization declared COVID-19 a global pandemic. The number of cases reached a point where the entire world needed to take action. In the United States, state governors began closing down states to reduce the rate of infection. This meant that all citizens had to remain in their homes until further notice. Fast forward 6 weeks, the citizens of the United States are eager to leave their homes and return to normal life. The decision to do open up the country will be made based on the rate of infection and the increase in new cases. I looked at the data for this in New York State to see if Governor Cuomo should make the decision to open. *



# Data Description

*Include data sources/locations, versions/dates, etc.* 

# Results

*Break out your results by each problem you attacked*

## Problem 1 

*We need to visualize the number of new deaths per days in New York, separated by counties. * 

 
### Methods


```{r echo = F, results = 'hide',  warning=FALSE, message=FALSE}

April22 <- read_csv("data/csv/04-22-2020.csv")
Ap22 <- April22[April22$Province_State == "New York",]
A22 <- data.frame(Ap22$Admin2, Ap22$Confirmed, Ap22$Deaths)
A22 <- A22[rowSums(is.na(Ap22)) == 0,] #April 22nd NY Counties Confirmed and Deaths
A22Deaths = sum(A22$Ap22.Deaths)

Deaths = 19413

April23 <- read_csv("data/csv/04-23-2020.csv") 
Ap23 <- April23[April23$Province_State == "New York",]
A23 <- data.frame(Ap23$Admin2, Ap23$Confirmed, Ap23$Deaths)
A23 <- A23[rowSums(is.na(Ap23)) == 0,] #April 23rd NY Counties Confirmed and Deaths
A23Deaths = sum(A23$Ap23.Deaths) - Deaths
A23Change = A23$Ap23.Deaths - A22$Ap22.Deaths
A23 <- data.frame(A23, A23Change)

April26 <- read_csv("data/csv/04-26-2020.csv")
Ap26 <- April26[April26$Province_State == "New York",]
A26 <- data.frame(Ap26$Admin2, Ap26$Confirmed, Ap26$Deaths)
A26 <- A26[rowSums(is.na(A26)) == 0,] #April 26th NY Counties Confirmed and Deaths
A26 <- A26[-c(53),]
A26Deaths = sum(A26$Ap26.Deaths) - Deaths
A26Change = A26$Ap26.Deaths - A23$Ap23.Deaths
A26 <- data.frame(A26, A26Change)

April29 <- read_csv("data/csv/04-29-2020.csv")
Ap29 <- April29[April29$Province_State == "New York",]
A29 <- data.frame(Ap29$Admin2, Ap29$Confirmed, Ap29$Deaths)
A29 <- A29[rowSums(is.na(A29)) == 0,] #April 29th NY Counties Confirmed and Deaths
A29 <- A29[-c(53),]
A29Deaths = sum(A29$Ap29.Deaths) - Deaths
A29Change = A29$Ap29.Deaths - A26$Ap26.Deaths
A29 <- data.frame(A29, A29Change)

May2 <- read_csv("data/csv/05-02-2020.csv")
Ma2 <- May2[May2$Province_State == "New York",]
M2 <- data.frame(Ma2$Admin2, Ma2$Confirmed, Ma2$Deaths)
M2 <- M2[rowSums(is.na(M2)) == 0,] #May 2nd NY Counties Confirmed and Deaths
M2 <- M2[-c(53),]
M2Deaths = sum(M2$Ma2.Deaths) - Deaths
M2Change = M2$Ma2.Deaths - A29$Ap29.Deaths
M2 <- data.frame(M2, M2Change)

May5 <- read_csv("data/csv/05-05-2020.csv")
Ma5 <- May5[May5$Province_State == "New York",]
M5 <- data.frame(Ma5$Admin2, Ma5$Confirmed, Ma5$Deaths)
M5 <- M5[rowSums(is.na(M5)) == 0,] #May 5th NY Counties Confirmed and Deaths
M5 <- M5[-c(53),]
M5Deaths = sum(M5$Ma5.Deaths) - Deaths
M5Change = M5$Ma5.Deaths - M2$Ma2.Deaths
M5 <- data.frame(M5, M5Change)

#Put the number of new deaths for each day into a csv file
DaysDeaths <- read_csv("data/csv/DaysDeaths.csv")

```

```{r echo = F, results = 'hide',  warning=FALSE, message=FALSE}
library(usmap)
library(ggplot2)
```

```{r echo = F, results = 'hide',  warning=FALSE, message=FALSE}
Ap23 <-Ap23[rowSums(is.na(Ap23)) == 0,]
fips <- Ap23$FIPS
s <- rep("ny", length(fips))
AP23names <- Ap23$Admin2
AP23deaths <- A23$A23Change
AP23combined <- data.frame(fips,s,AP23names,AP23deaths) #Combined Data Frame for April 23th
AP23combined <- AP23combined[-c(29),]
AP23combined <- add_row(AP23combined, fips = 36005, s = "ny", AP23names = "Bronx", AP23deaths = 329)
AP23combined <- add_row(AP23combined, fips = 36061, s = "ny", AP23names = "Manhattan", AP23deaths = 329)
AP23combined <- add_row(AP23combined, fips = 36085, s = "ny", AP23names = "Staten Island", AP23deaths = 329)
AP23combined <- add_row(AP23combined, fips = 36047, s = "ny", AP23names = "Brooklyn", AP23deaths = 329)
AP23combined <- add_row(AP23combined, fips = 36081, s = "ny", AP23names = "Queens", AP23deaths = 329)
```

```{r echo = F, results = 'hide',  warning=FALSE, message=FALSE}
Ap26 <-Ap26[rowSums(is.na(Ap26)) == 0,]
fips <- Ap26$FIPS
s <- rep("ny", length(fips))
AP26names <- Ap26$Admin2
AP26deaths <- A26$A26Change
AP26combined <- data.frame(fips,s,AP26names,AP26deaths) #Combined Data Frame for April 26th
AP26combined <- AP26combined[-c(29),]
AP26combined <- add_row(AP26combined, fips = 36005, s = "ny", AP26names = "Bronx", AP26deaths = 223)
AP26combined <- add_row(AP26combined, fips = 36061, s = "ny", AP26names = "Manhattan", AP26deaths = 223)
AP26combined <- add_row(AP26combined, fips = 36085, s = "ny", AP26names = "Staten Island", AP26deaths = 223)
AP26combined <- add_row(AP26combined, fips = 36047, s = "ny", AP26names = "Brooklyn", AP26deaths = 223)
AP26combined <- add_row(AP26combined, fips = 36081, s = "ny", AP26names = "Queens", AP26deaths = 223)

```

```{r echo = F, results = 'hide',  warning=FALSE, message=FALSE}
Ap29 <-Ap29[rowSums(is.na(Ap29)) == 0,]
fips <- Ap29$FIPS
s <- rep("ny", length(fips))
AP29names <- Ap29$Admin2
AP29deaths <- A29$A29Change
AP29combined <- data.frame(fips,s,AP29names,AP29deaths) #Combined Data Frame for April 29th
AP29combined <- AP29combined[-c(29),]
AP29combined <- add_row(AP29combined, fips = 36005, s = "ny", AP29names = "Bronx", AP29deaths = 199)
AP29combined <- add_row(AP29combined, fips = 36061, s = "ny", AP29names = "Manhattan", AP29deaths = 199)
AP29combined <- add_row(AP29combined, fips = 36085, s = "ny", AP29names = "Staten Island", AP29deaths = 199)
AP29combined <- add_row(AP29combined, fips = 36047, s = "ny", AP29names = "Brooklyn", AP29deaths = 199)
AP29combined <- add_row(AP29combined, fips = 36081, s = "ny", AP29names = "Queens", AP29deaths = 199)
```

```{r echo = F, results = 'hide',  warning=FALSE, message=FALSE}
Ma2 <-Ma2[rowSums(is.na(Ma2)) == 0,]
fips <- Ma2$FIPS
s <- rep("ny", length(fips))
M2names <- Ma2$Admin2
M2deaths <- M2$M2Change
M2combined <- data.frame(fips,s,M2names,M2deaths) #Combined Data Frame for April 29th
M2combined <- M2combined[-c(29),]
M2combined <- add_row(M2combined, fips = 36005, s = "ny", M2names = "Bronx", M2deaths = 104)
M2combined <- add_row(M2combined, fips = 36061, s = "ny", M2names = "Manhattan", M2deaths = 104)
M2combined <- add_row(M2combined, fips = 36085, s = "ny", M2names = "Staten Island", M2deaths = 104)
M2combined <- add_row(M2combined, fips = 36047, s = "ny", M2names = "Brooklyn", M2deaths = 104)
M2combined <- add_row(M2combined, fips = 36081, s = "ny", M2names = "Queens", M2deaths = 104)
```

```{r echo = F, results = 'hide',  warning=FALSE, message=FALSE}
Ma5 <-Ma5[rowSums(is.na(Ma5)) == 0,]
fips <- Ma5$FIPS
s <- rep("ny", length(fips))
M5names <- Ma5$Admin2
M5deaths <- M5$M5Change
M5combined <- data.frame(fips,s,M5names,M5deaths) #Combined Data Frame for May 5th
M5combined <- M5combined[-c(29),]
M5combined <- add_row(M5combined, fips = 36005, s = "ny", M5names = "Bronx", M5deaths = 144)
M5combined <- add_row(M5combined, fips = 36061, s = "ny", M5names = "Manhattan", M5deaths = 144)
M5combined <- add_row(M5combined, fips = 36085, s = "ny", M5names = "Staten Island", M5deaths = 144)
M5combined <- add_row(M5combined, fips = 36047, s = "ny", M5names = "Brooklyn", M5deaths = 144)
M5combined <- add_row(M5combined, fips = 36081, s = "ny", M5names = "Queens", M5deaths = 144)
```

```{r echo = F, results = 'hide',  warning=FALSE, message=FALSE}
plot_usmap(
    data = AP23combined, values = "AP23deaths", include = c("NY"), exclude = c("36005", "36061", "36085", "36047", "36081", "36059", "36103", "36119", "36087"), color = "royalblue"
  ) + 
  scale_fill_continuous(
    low = "white", high = "royalblue", name = "Deaths", label = scales::comma, limit = c(-2,50)
  ) + 
  labs(title = "New York State Counties - North of Weschester", subtitle = "Deaths Per County, Aril 23rd") +
  theme(legend.position = "right")
```

```{r echo = F, results = 'hide',  warning=FALSE, message=FALSE}

plot_usmap(
    data = AP26combined, values = "AP26deaths", include = c("NY"), exclude = c("36005", "36061", "36085", "36047", "36081", "36059", "36103", "36119", "36087"), color = "royalblue"
  ) + 
  scale_fill_continuous(
    low = "white", high = "royalblue", name = "Deaths", label = scales::comma, limit = c(-2,50)
  ) + 
  labs(title = "New York State Counties - North of Weschester", subtitle = "Deaths Per County, Aril 26th") +
  theme(legend.position = "right")
```

```{r echo = F, results = 'hide',  warning=FALSE, message=FALSE}
plot_usmap(
    data = AP29combined, values = "AP29deaths", include = c("NY"), exclude = c("36005", "36061", "36085", "36047", "36081", "36059", "36103", "36119", "36087"), color = "royalblue"
  ) + 
  scale_fill_continuous(
    low = "white", high = "royalblue", name = "Deaths", label = scales::comma, limit = c(-2,50)
  ) + 
  labs(title = "New York State Counties - North of Weschester", subtitle = "Deaths Per County, Aril 29th") +
  theme(legend.position = "right")

```

```{r echo = F, results = 'hide',  warning=FALSE, message=FALSE}
plot_usmap(
    data = M2combined, values = "M2deaths", include = c("NY"), exclude = c("36005", "36061", "36085", "36047", "36081", "36059", "36103", "36119", "36087"), color = "royalblue"
  ) + 
  scale_fill_continuous(
    low = "white", high = "royalblue", name = "Deaths", label = scales::comma, limit = c(-2,50)
  ) + 
  labs(title = "New York State Counties - North of Weschester", subtitle = "Deaths Per County, May 2nd") +
  theme(legend.position = "right")
```

```{r echo = F, results = 'hide',  warning=FALSE, message=FALSE}
plot_usmap(
    data = M5combined, values = "M5deaths", include = c("NY"), exclude = c("36005", "36061", "36085", "36047", "36081", "36059", "36103", "36119", "36087"), color = "royalblue"
  ) + 
  scale_fill_continuous(
    low = "white", high = "royalblue", name = "Deaths", label = scales::comma, limit = c(-2,50)
  ) + 
  labs(title = "New York State Counties - North of Weschester", subtitle = "Deaths Per County, May 5th") +
  theme(legend.position = "right")

```
	
	
	
	
	
	
	
	
	
```{r echo = F, results = 'hide',  warning=FALSE, message=FALSE}
plot_usmap(
    data = AP23combined, values = "AP23deaths", include = c("36005", "36061", "36085", "36047", "36081", "36059", "36103", "36119", "36087"), color = "royalblue3"
  ) + 
  scale_fill_continuous(
    low = "white", high = "royalblue3", name = "Deaths", label = scales::comma, limit = c(-10, 400)
  ) + 
  labs(title = "New York Counties - Westchester and Below", subtitle = "Deaths Per County, April 23rd") +
  theme(legend.position = "right")


plot_usmap(
    data = AP26combined, values = "AP26deaths", include = c("36005", "36061", "36085", "36047", "36081", "36059", "36103", "36119", "36087"), color = "royalblue3"
  ) + 
  scale_fill_continuous(
    low = "white", high = "royalblue3", name = "Deaths", label = scales::comma, limit = c(-10, 400)
  ) + 
  labs(title = "New York Counties - Westchester and Below", subtitle = "Deaths Per County, April 26th") +
  theme(legend.position = "right")


plot_usmap(
    data = AP29combined, values = "AP29deaths", include = c("36005", "36061", "36085", "36047", "36081", "36059", "36103", "36119", "36087"), color = "royalblue3"
  ) + 
  scale_fill_continuous(
    low = "white", high = "royalblue3", name = "Deaths", label = scales::comma, limit = c(-10, 400)
  ) + 
  labs(title = "New York Counties - Westchester and Below", subtitle = "Deaths Per County, April 29th") +
  theme(legend.position = "right")

plot_usmap(
    data = M2combined , values = "M2deaths", include = c("36005", "36061", "36085", "36047", "36081", "36059", "36103", "36119", "36087"), color = "royalblue3"
  ) + 
  scale_fill_continuous(
    low = "white", high = "royalblue3", name = "Deaths", label = scales::comma, limit = c(-10, 400)
  ) + 
  labs(title = "New York Counties - Westchester and Below", subtitle = "Deaths Per County, May 2nd") +
  theme(legend.position = "right")

plot_usmap(
    data = M5combined , values = "M5deaths", include = c("36005", "36061", "36085", "36047", "36081", "36059", "36103", "36119", "36087"), color = "royalblue3"
  ) + 
  scale_fill_continuous(
    low = "white", high = "royalblue3", name = "Deaths", label = scales::comma, limit = c(-10, 400)
  ) + 
  labs(title = "New York Counties - Westchester and Below", subtitle = "Deaths Per County, May 5th") +
  theme(legend.position = "right")
```

	
### Results

*What were the results on this problem?*


### Discussion

*Interpret results.  What were your findings?  What do they say about COVID-19?   What are the strengths and limitations of these results? Is there support for your findings from other sources? Include references as appropriate.*

## Problem 2
 
### Methods
	
### Results

### Discussion

*Do at least 2 problems. Add more as necessary *
# Summary and COVIDMINDER Recommendations
* Overall, what insights did you find  about the  COVID-19 epidemic in your analysis?    
* What recommendations do you have for COVIDMINDER for  Data utilization, Analytics, Visualizations, User interface design, etc.
    + Would you recommend that your analysis be included in COVIDMINDER?  Why or Why not?  
    + If not, is there additional work that might  improve the results?  Note that it is perfectly okay for you to recommend to not to include your analysis. Research doesn't always work out.  As a team we need to try a lot of different ideas in hopes of finding a few good ones to pursue.  *
*Think of yourself as a consultant reporting back on a particular aspect of the analysis and application design!*

# References

*Include any references to literature in support of your work*
*You might also wish to include references to unusual R packages essential to your work*

# Appendix

*Include here whatever you think is relevant to support the main content of your notebook. For example, you may have only include example figures above in your main text but include additional ones here* 
